{"ast":null,"code":"// Copyright 2017 The Kubernetes Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { DOCUMENT } from '@angular/common';\nimport { HttpClient } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { ConfigService } from '@common/services/global/config';\nimport { AssetsService } from '@common/services/global/assets';\nimport { GlobalSettingsService } from '@common/services/global/globalsettings';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@common/services/global/assets\";\nimport * as i2 from \"@common/services/global/config\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@common/services/global/globalsettings\";\nimport * as i6 from \"@angular/flex-layout/flex\";\nimport * as i7 from \"@angular/material/toolbar\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"@angular/flex-layout/extended\";\nimport * as i11 from \"../common/components/namespace/component\";\nimport * as i12 from \"./search/component\";\nimport * as i13 from \"@angular/material/button\";\nimport * as i14 from \"@angular/material/tooltip\";\nimport * as i15 from \"./notifications/component\";\nimport * as i16 from \"./userpanel/component\";\nimport * as i17 from \"./nav/hamburger/component\";\nimport * as i18 from \"../common/components/breadcrumbs/component\";\nimport * as i19 from \"../common/components/actionbar/component\";\nimport * as i20 from \"./nav/component\";\nimport * as i21 from \"@angular/material/progress-spinner\";\n\nfunction ChromeComponent_mat_toolbar_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-toolbar\", 23);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", ctx_r0.getSystemBannerClass())(\"innerHTML\", ctx_r0.getSystemBannerMessage(), i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction ChromeComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵelement(1, \"mat-spinner\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"diameter\", 48);\n  }\n}\n\nfunction ChromeComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵelement(1, \"router-outlet\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nclass SystemBanner {}\n\nexport let ChromeComponent = /*#__PURE__*/(() => {\n  class ChromeComponent {\n    constructor(assets, config, http_, router_, document_, globalSettings_) {\n      this.assets = assets;\n      this.config = config;\n      this.http_ = http_;\n      this.router_ = router_;\n      this.document_ = document_;\n      this.globalSettings_ = globalSettings_;\n      this.loading = false;\n    }\n\n    ngOnInit() {\n      this.http_.get(ChromeComponent.systemBannerEndpoint).toPromise().then(sb => {\n        this.systemBanner_ = sb;\n      });\n      this.registerVisibilityChangeHandler_();\n    }\n\n    getWorkloadsStateName() {\n      return '/workloads';\n    }\n\n    isSystemBannerVisible() {\n      return this.systemBanner_ && this.systemBanner_.message.length > 0;\n    }\n\n    getSystemBannerClass() {\n      const severity = this.systemBanner_ && this.systemBanner_.severity ? this.systemBanner_.severity.toLowerCase() : '';\n\n      switch (severity) {\n        case 'warning':\n          return 'kd-bg-warning-light';\n\n        case 'error':\n          return 'kd-bg-error-light';\n\n        default:\n          return 'kd-bg-success-light';\n      }\n    }\n\n    getSystemBannerMessage() {\n      return this.systemBanner_ ? this.systemBanner_.message : '';\n    }\n\n    goToCreateState() {\n      this.router_.navigate(['create'], {\n        queryParamsHandling: 'preserve'\n      });\n    }\n\n    applyToolbarStyles() {\n      const styles = {\n        'background-color': this.config.getColor()\n      };\n      return styles;\n    }\n\n    applyTitleStyles() {\n      const styles = {\n        display: 'inline-block',\n        'vertical-align': 'top',\n        color: this.config.getColor()\n      };\n      return styles;\n    }\n\n    registerVisibilityChangeHandler_() {\n      if (typeof this.document_.addEventListener === 'undefined') {\n        console.log('Your browser does not support Page Visibility API. Page cannot properly stop background tasks when tab is inactive.');\n        return;\n      }\n\n      this.document_.addEventListener('visibilitychange', this.handleVisibilityChange_.bind(this), false);\n    }\n\n    handleVisibilityChange_() {\n      this.globalSettings_.onPageVisibilityChange.emit(!this.document_.hidden);\n    }\n\n  }\n\n  ChromeComponent.systemBannerEndpoint = 'api/v1/systembanner';\n\n  ChromeComponent.ɵfac = function ChromeComponent_Factory(t) {\n    return new (t || ChromeComponent)(i0.ɵɵdirectiveInject(i1.AssetsService), i0.ɵɵdirectiveInject(i2.ConfigService), i0.ɵɵdirectiveInject(i3.HttpClient), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(DOCUMENT), i0.ɵɵdirectiveInject(i5.GlobalSettingsService));\n  };\n\n  ChromeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ChromeComponent,\n    selectors: [[\"kd-chrome\"]],\n    decls: 27,\n    vars: 9,\n    consts: function () {\n      let i18n_0;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        const MSG_EXTERNAL_444174825108794574$$SRC_APP_FRONTEND_CHROME_COMPONENT_TS_1 = goog.getMsg(\"Create new resource\");\n        i18n_0 = MSG_EXTERNAL_444174825108794574$$SRC_APP_FRONTEND_CHROME_COMPONENT_TS_1;\n      } else {\n        i18n_0 = $localize`Create new resource`;\n      }\n\n      return [[\"fxLayout\", \"column\", \"fxFill\", \"\", \"fxFlexFill\", \"\"], [1, \"kd-toolbar\", \"kd-primary-toolbar\"], [\"fxLayout\", \"row\", \"fxFlex\", \"auto\", 1, \"kd-toolbar-tools\"], [1, \"kd-logo-bar\"], [\"queryParamsHandling\", \"preserve\", 1, \"kd-toolbar-logo-link\", 3, \"routerLink\"], [1, \"kd-toolbar-logo\", 3, \"svgIcon\"], [3, \"ngStyle\"], [\"id\", \"nav-namespace-selector\"], [\"fxFlex\", \"\", 1, \"kd-search-bar\"], [\"fxLayout\", \"row\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", \"matTooltip\", i18n_0, 1, \"kd-toolbar-action\", 3, \"click\"], [1, \"kd-primary-toolbar-icon\"], [1, \"kd-toolbar-action\"], [1, \"kd-second-toolbar\", \"kd-bg-primary\", 3, \"ngStyle\"], [\"fxFlex\", \"\", 1, \"kd-toolbar-tools\"], [\"fxFlex\", \"none\"], [1, \"kd-actionbar-breadcrumbs\"], [\"fxFlex\", \"end\"], [\"class\", \"kd-system-banner\", 3, \"ngClass\", \"innerHTML\", 4, \"ngIf\"], [\"fxFlex\", \"\", \"fxLayout\", \"row\", 1, \"kd-chrome-container\", \"kd-bg-background\"], [\"fxLayoutAlign\", \"center\", \"fxFlex\", \"\", 1, \"kd-scroll-container\", 3, \"ngSwitch\"], [\"fxFlexAlign\", \"center\", 4, \"ngSwitchCase\"], [\"fxFlex\", \"\", \"class\", \"kd-scroll-container\", 4, \"ngSwitchCase\"], [1, \"kd-system-banner\", 3, \"ngClass\", \"innerHTML\"], [\"fxFlexAlign\", \"center\"], [\"mode\", \"indeterminate\", 3, \"diameter\"], [\"fxFlex\", \"\", 1, \"kd-scroll-container\"]];\n    },\n    template: function ChromeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"mat-toolbar\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"a\", 4);\n        i0.ɵɵelement(5, \"mat-icon\", 5);\n        i0.ɵɵelementStart(6, \"span\", 6);\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"kd-namespace-selector\", 7);\n        i0.ɵɵelement(9, \"kd-search\", 8);\n        i0.ɵɵelementStart(10, \"div\", 9);\n        i0.ɵɵelementStart(11, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function ChromeComponent_Template_button_click_11_listener() {\n          return ctx.goToCreateState();\n        });\n        i0.ɵɵelementStart(12, \"mat-icon\", 11);\n        i0.ɵɵtext(13, \"add\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"kd-notifications\", 12);\n        i0.ɵɵelement(15, \"kd-user-panel\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"mat-toolbar\", 13);\n        i0.ɵɵelementStart(17, \"div\", 14);\n        i0.ɵɵelement(18, \"kd-nav-hamburger\", 15);\n        i0.ɵɵelement(19, \"kd-breadcrumbs\", 16);\n        i0.ɵɵelement(20, \"kd-actionbar\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(21, ChromeComponent_mat_toolbar_21_Template, 1, 2, \"mat-toolbar\", 18);\n        i0.ɵɵelementStart(22, \"div\", 19);\n        i0.ɵɵelement(23, \"kd-nav\");\n        i0.ɵɵelementStart(24, \"div\", 20);\n        i0.ɵɵtemplate(25, ChromeComponent_div_25_Template, 2, 1, \"div\", 21);\n        i0.ɵɵtemplate(26, ChromeComponent_div_26_Template, 2, 0, \"div\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"routerLink\", ctx.getWorkloadsStateName());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"svgIcon\", ctx.assets.getAppLogo());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngStyle\", ctx.applyTitleStyles());\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(ctx.config.getTitle());\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngStyle\", ctx.applyToolbarStyles());\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.isSystemBannerVisible());\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngSwitch\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", false);\n      }\n    },\n    directives: [i6.DefaultLayoutDirective, i6.FlexFillDirective, i7.MatToolbar, i6.DefaultFlexDirective, i4.RouterLinkWithHref, i8.MatIcon, i9.NgStyle, i10.DefaultStyleDirective, i11.NamespaceSelectorComponent, i12.SearchComponent, i13.MatButton, i14.MatTooltip, i15.NotificationsComponent, i16.UserPanelComponent, i17.HamburgerComponent, i18.BreadcrumbsComponent, i19.ActionbarComponent, i9.NgIf, i9.NgClass, i10.DefaultClassDirective, i20.NavComponent, i6.DefaultLayoutAlignDirective, i9.NgSwitch, i9.NgSwitchCase, i6.DefaultFlexAlignDirective, i21.MatSpinner, i4.RouterOutlet],\n    styles: [\".kd-toolbar-logo-link[_ngcontent-%COMP%]   .kd-toolbar-logo-text[_ngcontent-%COMP%], .kd-toolbar-logo-link[_ngcontent-%COMP%]   .kd-toolbar-logo[_ngcontent-%COMP%]{height:32px;margin-right:8px;min-height:32px;min-width:32px;width:32px}.kd-toolbar[_ngcontent-%COMP%]{height:60px;min-height:48px;padding-left:14px}.kd-toolbar-tools[_ngcontent-%COMP%]{align-items:center;height:48px;margin:auto;padding-left:8px}.kd-logo-bar[_ngcontent-%COMP%]{height:32px;width:250px}.kd-toolbar-logo-link[_ngcontent-%COMP%]   .kd-toolbar-logo-text[_ngcontent-%COMP%]{min-width:112px;width:112px}.kd-second-toolbar[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;height:56px;min-height:56px;padding-left:4px;z-index:100}.kd-system-banner[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;display:inline;font-size:14px;height:48px;line-height:48px;min-height:48px;overflow:hidden;padding:0 24px;white-space:nowrap;z-index:200}.kd-chrome-container[_ngcontent-%COMP%]{overflow-x:hidden;position:relative}.kd-scroll-container[_ngcontent-%COMP%]{overflow-x:auto}\"]\n  });\n  return ChromeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}