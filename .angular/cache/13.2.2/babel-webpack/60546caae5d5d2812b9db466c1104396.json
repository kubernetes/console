{"ast":null,"code":"// Copyright 2017 The Kubernetes Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { ElementRef } from '@angular/core';\nimport { Animations } from '@common/animations/animations';\nimport { NotificationsService } from '@common/services/global/notifications';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@common/services/global/notifications\";\nimport * as i2 from \"@angular/material/button\";\nimport * as i3 from \"@angular/material/tooltip\";\nimport * as i4 from \"@angular/material/icon\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/flex-layout/flex\";\nimport * as i7 from \"@angular/flex-layout/extended\";\nimport * as i8 from \"../../common/components/date/component\";\nimport * as i9 from \"@angular/material/divider\";\n\nfunction NotificationsComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"@easeOut\", undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.getUnreadCount());\n  }\n}\n\nfunction NotificationsComponent_div_5_div_2_mat_divider_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-divider\");\n  }\n}\n\nconst _c2 = function (a0) {\n  return {\n    \"kd-notification-unread\": a0\n  };\n};\n\nfunction NotificationsComponent_div_5_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelementStart(1, \"div\", 12);\n    i0.ɵɵelementStart(2, \"mat-icon\", 13);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 14);\n    i0.ɵɵelementStart(5, \"span\", 15);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\", 16);\n    i0.ɵɵi18nStart(8, 17);\n    i0.ɵɵelement(9, \"kd-date\", 18);\n    i0.ɵɵi18nEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function NotificationsComponent_div_5_div_2_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const index_r7 = restoredCtx.index;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.remove(index_r7);\n    });\n    i0.ɵɵelementStart(11, \"mat-icon\");\n    i0.ɵɵtext(12, \"close\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, NotificationsComponent_div_5_div_2_mat_divider_13_Template, 1, 0, \"mat-divider\", 20);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const notification_r5 = ctx.$implicit;\n    const last_r6 = ctx.last;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(6, _c2, !notification_r5.read));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", notification_r5.cssClass);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(notification_r5.icon);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(notification_r5.message);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"date\", notification_r5.timestamp);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", !last_r6 || !notification_r5.read);\n  }\n}\n\nfunction NotificationsComponent_div_5_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵi18n(1, 22);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction NotificationsComponent_div_5_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵelementStart(1, \"span\", 24);\n    i0.ɵɵlistener(\"click\", function NotificationsComponent_div_5_div_4_Template_span_click_1_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return ctx_r11.clear();\n    });\n    i0.ɵɵi18n(2, 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction NotificationsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵelementStart(1, \"div\", 7);\n    i0.ɵɵtemplate(2, NotificationsComponent_div_5_div_2_Template, 14, 8, \"div\", 8);\n    i0.ɵɵtemplate(3, NotificationsComponent_div_5_div_3_Template, 2, 0, \"div\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, NotificationsComponent_div_5_div_4_Template, 3, 0, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.notifications);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.notifications.length === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.notifications.length > 0);\n  }\n}\n\nexport let NotificationsComponent = /*#__PURE__*/(() => {\n  class NotificationsComponent {\n    constructor(notifications_, element_) {\n      this.notifications_ = notifications_;\n      this.element_ = element_;\n      this.isOpen_ = false;\n      this.notifications = [];\n    }\n\n    onOutsideClick_(event) {\n      if (!this.element_.nativeElement.contains(event.target) && this.isOpen()) {\n        this.close_();\n      }\n    }\n\n    load_() {\n      this.notifications = this.notifications_.getNotifications();\n    }\n\n    open_() {\n      this.load_();\n      this.isOpen_ = true;\n    }\n\n    close_() {\n      this.notifications_.markAllAsRead();\n      this.isOpen_ = false;\n    }\n\n    isOpen() {\n      return this.isOpen_;\n    }\n\n    toggle() {\n      this.isOpen() ? this.close_() : this.open_();\n    }\n\n    remove(index) {\n      this.notifications_.remove(index);\n    }\n\n    clear() {\n      this.notifications_.clear();\n      this.load_();\n    }\n\n    getUnreadCount() {\n      return this.notifications_.getUnreadCount();\n    }\n\n  }\n\n  NotificationsComponent.ɵfac = function NotificationsComponent_Factory(t) {\n    return new (t || NotificationsComponent)(i0.ɵɵdirectiveInject(i1.NotificationsService), i0.ɵɵdirectiveInject(i0.ElementRef));\n  };\n\n  NotificationsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NotificationsComponent,\n    selectors: [[\"kd-notifications\"]],\n    hostBindings: function NotificationsComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"click\", function NotificationsComponent_click_HostBindingHandler($event) {\n          return ctx.onOutsideClick_($event);\n        }, false, i0.ɵɵresolveDocument);\n      }\n    },\n    decls: 6,\n    vars: 3,\n    consts: function () {\n      let i18n_0;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        const MSG_EXTERNAL_822417217669691246$$SRC_APP_FRONTEND_CHROME_NOTIFICATIONS_COMPONENT_TS___1 = goog.getMsg(\"{$startTagKdDate}{$closeTagKdDate}\", {\n          \"startTagKdDate\": \"\\uFFFD#9\\uFFFD\",\n          \"closeTagKdDate\": \"\\uFFFD/#9\\uFFFD\"\n        });\n        i18n_0 = MSG_EXTERNAL_822417217669691246$$SRC_APP_FRONTEND_CHROME_NOTIFICATIONS_COMPONENT_TS___1;\n      } else {\n        i18n_0 = $localize`${\"\\uFFFD#9\\uFFFD\"}:START_TAG_KD_DATE:${\"\\uFFFD/#9\\uFFFD\"}:CLOSE_TAG_KD_DATE:`;\n      }\n\n      let i18n_3;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        const MSG_EXTERNAL_5145206565823805475$$SRC_APP_FRONTEND_CHROME_NOTIFICATIONS_COMPONENT_TS___4 = goog.getMsg(\"There are no notifications\");\n        i18n_3 = MSG_EXTERNAL_5145206565823805475$$SRC_APP_FRONTEND_CHROME_NOTIFICATIONS_COMPONENT_TS___4;\n      } else {\n        i18n_3 = $localize`There are no notifications`;\n      }\n\n      let i18n_5;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        const MSG_EXTERNAL_3415340061451880090$$SRC_APP_FRONTEND_CHROME_NOTIFICATIONS_COMPONENT_TS___6 = goog.getMsg(\"Remove all notifications\");\n        i18n_5 = MSG_EXTERNAL_3415340061451880090$$SRC_APP_FRONTEND_CHROME_NOTIFICATIONS_COMPONENT_TS___6;\n      } else {\n        i18n_5 = $localize`Remove all notifications`;\n      }\n\n      return [[1, \"kd-notifications-container\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 1, \"kd-global-action\", \"kd-notifications-button\", 3, \"matTooltip\", \"click\"], [1, \"kd-notifications-icon\", \"kd-primary-toolbar-icon\"], [\"class\", \"kd-notifications-counter kd-white kd-bg-error\", 4, \"ngIf\"], [\"class\", \"kd-notifications-panel\", \"fxLayout\", \"column\", 4, \"ngIf\"], [1, \"kd-notifications-counter\", \"kd-white\", \"kd-bg-error\"], [\"fxLayout\", \"column\", 1, \"kd-notifications-panel\"], [1, \"kd-notifications-content\"], [\"fxLayout\", \"column\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"kd-notifications-zero-state kd-muted\", \"fxLayoutAlign\", \"center center\", \"fxFlex\", \"\", 4, \"ngIf\"], [\"class\", \"kd-notifications-controls kd-bg-primary kd-white\", 4, \"ngIf\"], [\"fxLayout\", \"column\", 3, \"ngClass\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \" center\", 1, \"kd-notification-container\", 3, \"ngClass\"], [1, \"kd-notification-icon\"], [\"fxLayout\", \"column\", \"fxFlex\", \"\"], [1, \"kd-notification\"], [1, \"kd-notification-timestamp\", \"kd-muted\"], i18n_0, [\"relative\", \"\", 3, \"date\"], [\"mat-icon-button\", \"\", 1, \"kd-notification-remove-button\", \"kd-muted\", 3, \"click\"], [4, \"ngIf\"], [\"fxLayoutAlign\", \"center center\", \"fxFlex\", \"\", 1, \"kd-notifications-zero-state\", \"kd-muted\"], i18n_3, [1, \"kd-notifications-controls\", \"kd-bg-primary\", \"kd-white\"], [1, \"kd-clickable\", \"kd-accent\", 3, \"click\"], i18n_5];\n    },\n    template: function NotificationsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"button\", 1);\n        i0.ɵɵlistener(\"click\", function NotificationsComponent_Template_button_click_1_listener() {\n          return ctx.toggle();\n        });\n        i0.ɵɵelementStart(2, \"mat-icon\", 2);\n        i0.ɵɵtext(3, \"notifications\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, NotificationsComponent_div_4_Template, 2, 2, \"div\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(5, NotificationsComponent_div_5_Template, 5, 3, \"div\", 4);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matTooltip\", ctx.isOpen() ? \"Close notifications panel\" : \"Open notifications panel\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.getUnreadCount() > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isOpen());\n      }\n    },\n    directives: [i2.MatButton, i3.MatTooltip, i4.MatIcon, i5.NgIf, i6.DefaultLayoutDirective, i5.NgForOf, i5.NgClass, i7.DefaultClassDirective, i6.DefaultLayoutAlignDirective, i6.DefaultFlexDirective, i8.DateComponent, i9.MatDivider],\n    styles: [\".kd-notifications-container[_ngcontent-%COMP%] {\\n  max-width: 40px;\\n  position: relative;\\n  width: 40px;\\n}\\n\\n.kd-notifications-button[_ngcontent-%COMP%] {\\n  position: relative;\\n}\\n\\n.kd-notifications-icon[_ngcontent-%COMP%] {\\n  font-size: 24px;\\n  height: 24px;\\n  max-height: 24px;\\n  max-width: 24px;\\n  width: 24px;\\n}\\n\\n.kd-notifications-counter[_ngcontent-%COMP%] {\\n  border-radius: 16px;\\n  font-size: 9.6px;\\n  height: 16px;\\n  left: 24px;\\n  line-height: 16px;\\n  position: absolute;\\n  top: 16px;\\n  width: 16px;\\n}\\n\\n.kd-notifications-panel[_ngcontent-%COMP%] {\\n  border-radius: 4px;\\n  height: 400px;\\n  left: -360px;\\n  overflow: hidden;\\n  position: absolute;\\n  top: 48px;\\n  width: 400px;\\n  z-index: 1000;\\n}\\n\\n.kd-notifications-content[_ngcontent-%COMP%] {\\n  height: 368px;\\n  overflow-y: auto;\\n  width: 400px;\\n}\\n\\n.kd-notifications-zero-state[_ngcontent-%COMP%] {\\n  font-size: 20px;\\n  font-weight: 400;\\n}\\n\\n.kd-notification-container[_ngcontent-%COMP%]:hover   .kd-notification-remove-button[_ngcontent-%COMP%] {\\n  display: block;\\n}\\n\\n.kd-notification-remove-button[_ngcontent-%COMP%] {\\n  display: none;\\n}\\n\\n.kd-notification-icon[_ngcontent-%COMP%] {\\n  margin: 8px;\\n}\\n\\n.kd-notification[_ngcontent-%COMP%] {\\n  font-family: \\\"Roboto Mono Regular\\\", monospace;\\n  font-size: 14px;\\n  line-height: 14px;\\n  margin: 8px 0;\\n  white-space: normal;\\n  width: 320px;\\n}\\n\\n.kd-notification-timestamp[_ngcontent-%COMP%] {\\n  font-size: 10px;\\n  line-height: 10px;\\n  margin-bottom: 8px;\\n}\\n\\n.kd-notifications-controls[_ngcontent-%COMP%] {\\n  font-size: 12px;\\n  font-weight: 400;\\n  height: 32px;\\n  line-height: 32px;\\n  padding-left: 8px;\\n  width: 392px;\\n}\"],\n    data: {\n      animation: [Animations.easeOut]\n    }\n  });\n  return NotificationsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}