{"ast":null,"code":"// Copyright 2017 The Kubernetes Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { EventEmitter } from '@angular/core';\nimport { ReplaySubject, Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, takeUntil } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/flex-layout/flex\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../../directives/autofocus/directive\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/material/tooltip\";\n\nfunction CardListFilterComponent_input_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"input\", 6);\n    i0.ɵɵlistener(\"keyup\", function CardListFilterComponent_input_2_Template_input_keyup_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.keyUpEvent.next($event.target.value);\n    })(\"click\", function CardListFilterComponent_input_2_Template_input_click_0_listener($event) {\n      return $event.stopPropagation();\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"opened\", ctx_r0.openedChange);\n  }\n}\n\nfunction CardListFilterComponent_mat_icon_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-icon\", 7);\n    i0.ɵɵlistener(\"click\", function CardListFilterComponent_mat_icon_4_Template_mat_icon_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.switchSearchVisibility($event);\n    });\n    i0.ɵɵtext(1, \" filter_list \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CardListFilterComponent_mat_icon_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-icon\", 8);\n    i0.ɵɵlistener(\"click\", function CardListFilterComponent_mat_icon_5_Template_mat_icon_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.clearInput($event);\n    });\n    i0.ɵɵtext(1, \" close \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let CardListFilterComponent = /*#__PURE__*/(() => {\n  class CardListFilterComponent {\n    constructor() {\n      this.query = '';\n      this.keyUpEvent = new Subject();\n      this.filterEvent = new EventEmitter();\n      this.openedChange = new ReplaySubject();\n      this.hidden_ = true;\n      this.debounceTime_ = 500;\n      this.unsubscribe_ = new Subject();\n    }\n\n    ngOnInit() {\n      this.keyUpEvent.pipe(debounceTime(this.debounceTime_), distinctUntilChanged(), takeUntil(this.unsubscribe_)).subscribe(this.onFilterTriggered_.bind(this));\n    }\n\n    onFilterTriggered_(newVal) {\n      this.query = newVal;\n      this.filterEvent.emit(true);\n    }\n\n    isSearchVisible() {\n      return !this.hidden_;\n    }\n\n    switchSearchVisibility(event) {\n      event.stopPropagation();\n      this.hidden_ = !this.hidden_;\n      this.openedChange.next(!this.hidden_);\n    }\n\n    clearInput(event) {\n      this.switchSearchVisibility(event); // Do not call backend if it is not needed\n\n      if (this.query.length > 0) {\n        this.query = '';\n        this.filterEvent.emit(true);\n      }\n    }\n\n    ngOnDestroy() {\n      this.unsubscribe_.next();\n      this.unsubscribe_.complete();\n    }\n\n  }\n\n  CardListFilterComponent.ɵfac = function CardListFilterComponent_Factory(t) {\n    return new (t || CardListFilterComponent)();\n  };\n\n  CardListFilterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CardListFilterComponent,\n    selectors: [[\"kd-card-list-filter\"]],\n    decls: 6,\n    vars: 3,\n    consts: function () {\n      let i18n_0;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        const MSG_EXTERNAL_8829497237648100098$$SRC_APP_FRONTEND_COMMON_COMPONENTS_LIST_FILTER_COMPONENT_TS_1 = goog.getMsg(\"Filter\");\n        i18n_0 = MSG_EXTERNAL_8829497237648100098$$SRC_APP_FRONTEND_COMMON_COMPONENTS_LIST_FILTER_COMPONENT_TS_1;\n      } else {\n        i18n_0 = $localize`Filter`;\n      }\n\n      let i18n_2;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        const MSG_EXTERNAL_5382206657406454291$$SRC_APP_FRONTEND_COMMON_COMPONENTS_LIST_FILTER_COMPONENT_TS_3 = goog.getMsg(\"Filter objects by name\");\n        i18n_2 = MSG_EXTERNAL_5382206657406454291$$SRC_APP_FRONTEND_COMMON_COMPONENTS_LIST_FILTER_COMPONENT_TS_3;\n      } else {\n        i18n_2 = $localize`Filter objects by name`;\n      }\n\n      return [[\"fxFlex\", \"\", 1, \"kd-resource-card-list-filter-wrapper\"], [\"fxFlex\", \"\", \"fxLayoutAlign\", \"flex-end\", 1, \"kd-search-container\"], [\"kdAutofocus\", \"\", \"name\", \"search\", \"placeholder\", i18n_0, \"class\", \"kd-search-input\", 3, \"opened\", \"keyup\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\"], [\"class\", \"kd-search-icon\", \"matTooltip\", i18n_2, 3, \"click\", 4, \"ngIf\"], [\"class\", \"material-icons kd-search-icon\", 3, \"click\", 4, \"ngIf\"], [\"kdAutofocus\", \"\", \"name\", \"search\", \"placeholder\", i18n_0, 1, \"kd-search-input\", 3, \"opened\", \"keyup\", \"click\"], [\"matTooltip\", i18n_2, 1, \"kd-search-icon\", 3, \"click\"], [1, \"material-icons\", \"kd-search-icon\", 3, \"click\"]];\n    },\n    template: function CardListFilterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, CardListFilterComponent_input_2_Template, 1, 1, \"input\", 2);\n        i0.ɵɵelementStart(3, \"button\", 3);\n        i0.ɵɵtemplate(4, CardListFilterComponent_mat_icon_4_Template, 2, 0, \"mat-icon\", 4);\n        i0.ɵɵtemplate(5, CardListFilterComponent_mat_icon_5_Template, 2, 0, \"mat-icon\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isSearchVisible());\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isSearchVisible());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isSearchVisible());\n      }\n    },\n    directives: [i1.DefaultFlexDirective, i1.DefaultLayoutAlignDirective, i2.NgIf, i3.AutofocusDirective, i4.MatButton, i5.MatIcon, i6.MatTooltip],\n    styles: [\"[_nghost-%COMP%] {\\n  display: flex;\\n  flex: 1 1 auto;\\n}\\n\\n.kd-resource-card-list-filter-wrapper[_ngcontent-%COMP%] {\\n  padding-right: 4px;\\n}\\n\\n.kd-search-icon[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n  outline: none;\\n}\\n\\n.kd-search-input[_ngcontent-%COMP%] {\\n  border-bottom: 1px solid;\\n  border-left-width: 0;\\n  border-right-width: 0;\\n  border-top-width: 0;\\n  outline: none;\\n}\\n\\n.kd-search-container[_ngcontent-%COMP%] {\\n  -webkit-user-select: none;\\n          user-select: none;\\n}\"]\n  });\n  return CardListFilterComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}