MODULES_DIRECTORY := $(shell dirname $(realpath $(firstword $(MAKEFILE_LIST))))
API_DIRECTORY = $(MODULES_DIRECTORY)/api
METRICS_SCRAPER_DIRECTORY = $(MODULES_DIRECTORY)/metrics-scraper
WEB_DIRECTORY = $(MODULES_DIRECTORY)/web
AUTH_DIRECTORY = $(MODULES_DIRECTORY)/auth
MODULES := $(API_DIRECTORY) $(WEB_DIRECTORY) $(METRICS_SCRAPER_DIRECTORY) $(AUTH_DIRECTORY)

.PHONY: --run $(MODULES)
--run: $(MODULES)

$(MODULES):
	@$(MAKE) --directory=$@ $(TARGET)
